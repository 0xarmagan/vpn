<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate VPN Compass 2026 - Final Edition</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --color-primary: #4F46E5; --color-primary-dark: #4338CA; --color-success: #10B981;
            --color-warning: #F59E0B; --color-danger: #F43F5E; --color-accent: #06B6D4;
            --color-bg: #0F172A; --color-bg-secondary: #1E293B; --color-bg-tertiary: #334155;
            --color-text: #F1F5F9; --color-text-muted: #94A3B8; --color-border: #334155;
        }
        [data-theme="light"] {
            --color-bg: #FFFFFF; --color-bg-secondary: #F8FAFC; --color-bg-tertiary: #E2E8F0;
            --color-text: #0F172A; --color-text-muted: #64748B; --color-border: #E2E8F0;
        }
        body { font-family: 'Inter', sans-serif; background: var(--color-bg); color: var(--color-text); line-height: 1.6; transition: all 0.3s; overflow-x: hidden; }
        .font-display { font-family: 'Space Grotesk', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Hero Section */
        .hero { background: linear-gradient(135deg, rgba(79, 70, 229, 0.1), rgba(6, 182, 212, 0.1)); padding: 80px 24px; text-align: center; border-radius: 24px; margin-bottom: 40px; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
        
        /* Layout Components */
        .card { background: var(--color-bg-secondary); border-radius: 16px; padding: 24px; border: 1px solid var(--color-border); transition: all 0.3s; height: 100%; display: flex; flex-direction: column; }
        .card:hover { transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .btn { padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; border: none; display: inline-flex; align-items: center; gap: 8px; transition: 0.2s; justify-content: center; }
        .btn-primary { background: var(--color-primary); color: white; }
        .btn-secondary { background: var(--color-bg-tertiary); color: var(--color-text); }
        
        .tabs { display: flex; gap: 8px; border-bottom: 2px solid var(--color-border); margin-bottom: 24px; position: sticky; top: 0; background: var(--color-bg); z-index: 100; padding: 15px 0; }
        .tab { padding: 12px 24px; background: none; border: none; color: var(--color-text-muted); font-weight: 600; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab.active { color: var(--color-primary); border-bottom-color: var(--color-primary); }
        
        /* Grid System */
        .filters-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .vpn-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 24px; }
        
        /* Badges */
        .score-badge { padding: 4px 12px; border-radius: 9999px; font-weight: 600; font-family: 'JetBrains Mono'; font-size: 0.85rem; }
        .score-excellent { background: var(--color-success); color: white; }
        .score-good { background: var(--color-warning); color: white; }
        
        .comparison-table { overflow-x: auto; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; min-width: 800px; }
        th, td { padding: 12px; border-bottom: 1px solid var(--color-border); text-align: left; }
        th { background: var(--color-bg-tertiary); position: sticky; top: 0; }
        
        /* Modal */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; backdrop-filter: blur(4px); }
        .modal { background: var(--color-bg); border-radius: 16px; padding: 32px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; }
        
        input, select { background: var(--color-bg-secondary); border: 1px solid var(--color-border); color: var(--color-text); padding: 10px; border-radius: 8px; width: 100%; }
        .slider { width: 100%; height: 6px; border-radius: 3px; background: var(--color-bg-tertiary); outline: none; -webkit-appearance: none; margin: 10px 0; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%; background: var(--color-primary); cursor: pointer; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- ALL 26 VPN DATA FROM JSON ---
        const ALL_VPN_DATA = [
            { name: "NordVPN", overallScore: 95, rank: 1, bestFor: "Overall Excellence", price: { monthly: "$12.99", annual: "$4.49", twoYear: "$3.39" }, servers: "8000+", countries: "126+", noLogs: "Verified", jurisdiction: "Panama", streaming: "Excellent", speeds: { download: 455, loss: 9, latency: 25 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "ProtonVPN", overallScore: 94, rank: 2, bestFor: "Privacy & Security", price: { monthly: "‚Ç¨9.99", annual: "‚Ç¨5.99", twoYear: "‚Ç¨4.99" }, servers: "15330+", countries: "126+", noLogs: "Verified", jurisdiction: "Switzerland", streaming: "Excellent", speeds: { download: 430, loss: 14, latency: 30 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "Surfshark", overallScore: 91, rank: 3, bestFor: "Best Value", price: { monthly: "‚Ç¨12.95", annual: "‚Ç¨3.99", twoYear: "‚Ç¨2.19" }, servers: "3200+", countries: "100+", noLogs: "Verified", jurisdiction: "Netherlands", streaming: "Excellent", speeds: { download: 445, loss: 11, latency: 28 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "Mullvad", overallScore: 90, rank: 4, bestFor: "Maximum Privacy", price: { monthly: "‚Ç¨5.00", annual: "‚Ç¨5.00", twoYear: "‚Ç¨5.00" }, servers: "691+", countries: "45+", noLogs: "Verified", jurisdiction: "Sweden", streaming: "Good", speeds: { download: 425, loss: 15, latency: 32 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "ExpressVPN", overallScore: 88, rank: 6, bestFor: "Global Network", price: { monthly: "$12.95", annual: "$6.67", twoYear: "$6.67" }, servers: "3200+", countries: "100+", noLogs: "Verified", jurisdiction: "British Virgin Islands", streaming: "Excellent", speeds: { download: 410, loss: 18, latency: 31 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["Lightway", "OpenVPN"] },
            { name: "Private Internet Access", overallScore: 87, rank: 5, bestFor: "US-based Users", price: { monthly: "$11.95", annual: "$3.33", twoYear: "$2.11" }, servers: "34000+", countries: "90+", noLogs: "Verified", jurisdiction: "USA", streaming: "Good", speeds: { download: 380, loss: 24, latency: 35 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "CyberGhost", overallScore: 85, rank: 7, bestFor: "Streaming", price: { monthly: "‚Ç¨12.99", annual: "‚Ç¨2.19", twoYear: "‚Ç¨2.03" }, servers: "11700+", countries: "100+", noLogs: "Verified", jurisdiction: "Romania", streaming: "Excellent", speeds: { download: 420, loss: 16, latency: 33 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "Windscribe", overallScore: 82, rank: 8, bestFor: "Free Tier", price: { monthly: "$9.00", annual: "$4.08", twoYear: "$3.00" }, servers: "Undisclosed", countries: "69+", noLogs: "Claimed", jurisdiction: "Canada", streaming: "Good", speeds: { download: 350, loss: 30, latency: 45 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "IVPN", overallScore: 81, rank: 9, bestFor: "Transparency", price: { monthly: "$6.00", annual: "$5.00", twoYear: "$4.00" }, servers: "70+", countries: "32+", noLogs: "Verified", jurisdiction: "Gibraltar", streaming: "Poor", speeds: { download: 390, loss: 12, latency: 29 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "AirVPN", overallScore: 78, rank: 10, bestFor: "Advanced Users", price: { monthly: "‚Ç¨7.00", annual: "‚Ç¨4.00", twoYear: "‚Ç¨3.00" }, servers: "200+", countries: "23+", noLogs: "Verified", jurisdiction: "Italy", streaming: "Average", speeds: { download: 340, loss: 22, latency: 38 }, features: { killSwitch: true, splitTunnel: true, adBlock: false }, protocols: ["OpenVPN"] },
            { name: "Hide.me", overallScore: 77, rank: 11, bestFor: "Free Version", price: { monthly: "$9.95", annual: "$4.99", twoYear: "$2.59" }, servers: "2100+", countries: "78+", noLogs: "Verified", jurisdiction: "Malaysia", streaming: "Good", speeds: { download: 385, loss: 20, latency: 34 }, features: { killSwitch: true, splitTunnel: true, adBlock: false }, protocols: ["WireGuard", "SoftEther"] },
            { name: "IPVanish", overallScore: 76, rank: 12, bestFor: "Unlimited Devices", price: { monthly: "$11.99", annual: "$3.33", twoYear: "$2.50" }, servers: "2200+", countries: "75+", noLogs: "Verified", jurisdiction: "USA", streaming: "Good", speeds: { download: 415, loss: 15, latency: 30 }, features: { killSwitch: true, splitTunnel: true, adBlock: false }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "StrongVPN", overallScore: 74, rank: 13, bestFor: "Basic Use", price: { monthly: "$11.99", annual: "$3.97", twoYear: "$3.50" }, servers: "950+", countries: "30+", noLogs: "Claimed", jurisdiction: "USA", streaming: "Good", speeds: { download: 320, loss: 28, latency: 40 }, features: { killSwitch: true, splitTunnel: false, adBlock: false }, protocols: ["WireGuard", "IKEv2"] },
            { name: "VyprVPN", overallScore: 73, rank: 14, bestFor: "Chameleon Protocol", price: { monthly: "$10.00", annual: "$5.00", twoYear: "$3.00" }, servers: "700+", countries: "70+", noLogs: "Verified", jurisdiction: "Switzerland", streaming: "Good", speeds: { download: 310, loss: 25, latency: 42 }, features: { killSwitch: true, splitTunnel: true, adBlock: false }, protocols: ["Chameleon", "OpenVPN"] },
            { name: "Bitdefender VPN", overallScore: 72, rank: 15, bestFor: "Antivirus Users", price: { monthly: "$6.99", annual: "$2.50", twoYear: "$2.00" }, servers: "4000+", countries: "50+", noLogs: "Claimed", jurisdiction: "Romania", streaming: "Average", speeds: { download: 420, loss: 10, latency: 26 }, features: { killSwitch: true, splitTunnel: false, adBlock: true }, protocols: ["Catapult Hydra"] },
            { name: "Hotspot Shield", overallScore: 70, rank: 16, bestFor: "Speed (Proprietary)", price: { monthly: "$12.99", annual: "$7.99", twoYear: "$6.00" }, servers: "1800+", countries: "80+", noLogs: "Claimed", jurisdiction: "USA", streaming: "Good", speeds: { download: 440, loss: 8, latency: 24 }, features: { killSwitch: true, splitTunnel: true, adBlock: false }, protocols: ["Hydra"] },
            { name: "TunnelBear", overallScore: 68, rank: 17, bestFor: "Beginners", price: { monthly: "$9.99", annual: "$4.99", twoYear: "$3.33" }, servers: "5000+", countries: "48+", noLogs: "Verified", jurisdiction: "Canada", streaming: "Poor", speeds: { download: 280, loss: 35, latency: 50 }, features: { killSwitch: true, splitTunnel: true, adBlock: false }, protocols: ["OpenVPN", "IKEv2"] },
            { name: "Avast SecureLine", overallScore: 65, rank: 18, bestFor: "Simplicity", price: { monthly: "$4.99", annual: "$3.99", twoYear: "$2.99" }, servers: "700+", countries: "34+", noLogs: "Claimed", jurisdiction: "Czech Republic", streaming: "Average", speeds: { download: 300, loss: 30, latency: 45 }, features: { killSwitch: true, splitTunnel: false, adBlock: false }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "Norton Secure VPN", overallScore: 62, rank: 19, bestFor: "Norton 360 Users", price: { monthly: "$4.99", annual: "$3.33", twoYear: "$2.50" }, servers: "2000+", countries: "30+", noLogs: "Claimed", jurisdiction: "USA", streaming: "Average", speeds: { download: 250, loss: 40, latency: 55 }, features: { killSwitch: false, splitTunnel: false, adBlock: true }, protocols: ["OpenVPN"] },
            { name: "Kaspersky VPN", overallScore: 60, rank: 20, bestFor: "Kaspersky Users", price: { monthly: "$4.99", annual: "$2.50", twoYear: "$1.80" }, servers: "2000+", countries: "35+", noLogs: "Claimed", jurisdiction: "Switzerland", streaming: "Good", speeds: { download: 430, loss: 12, latency: 28 }, features: { killSwitch: true, splitTunnel: false, adBlock: false }, protocols: ["Catapult Hydra"] },
            { name: "PureVPN", overallScore: 58, rank: 21, bestFor: "Price", price: { monthly: "$10.95", annual: "$1.99", twoYear: "$1.33" }, servers: "6500+", countries: "78+", noLogs: "Verified", jurisdiction: "British Virgin Islands", streaming: "Average", speeds: { download: 360, loss: 25, latency: 38 }, features: { killSwitch: true, splitTunnel: true, adBlock: false }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "ZenMate", overallScore: 55, rank: 22, bestFor: "Browser Extension", price: { monthly: "$10.99", annual: "$4.49", twoYear: "$1.64" }, servers: "4700+", countries: "80+", noLogs: "Claimed", jurisdiction: "Germany", streaming: "Average", speeds: { download: 240, loss: 45, latency: 60 }, features: { killSwitch: true, splitTunnel: false, adBlock: false }, protocols: ["OpenVPN", "IKEv2"] },
            { name: "Atlas VPN", overallScore: 52, rank: 23, bestFor: "Budget (Acquired)", price: { monthly: "$10.99", annual: "$3.29", twoYear: "$1.64" }, servers: "1000+", countries: "42+", noLogs: "Claimed", jurisdiction: "USA", streaming: "Good", speeds: { download: 380, loss: 20, latency: 35 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["WireGuard"] },
            { name: "PrivadoVPN", overallScore: 50, rank: 24, bestFor: "Free Tier Streaming", price: { monthly: "$10.99", annual: "$2.50", twoYear: "$1.99" }, servers: "300+", countries: "48+", noLogs: "Claimed", jurisdiction: "Switzerland", streaming: "Good", speeds: { download: 340, loss: 25, latency: 40 }, features: { killSwitch: true, splitTunnel: false, adBlock: false }, protocols: ["WireGuard", "OpenVPN"] },
            { name: "AdGuard VPN", overallScore: 48, rank: 25, bestFor: "Ad Blocking Experts", price: { monthly: "$11.99", annual: "$3.99", twoYear: "$2.00" }, servers: "100+", countries: "50+", noLogs: "Claimed", jurisdiction: "Cyprus", streaming: "Poor", speeds: { download: 220, loss: 50, latency: 65 }, features: { killSwitch: true, splitTunnel: true, adBlock: true }, protocols: ["Proprietary"] },
            { name: "Opera VPN", overallScore: 40, rank: 26, bestFor: "In-Browser Proxy", price: { monthly: "$0.00", annual: "$0.00", twoYear: "$0.00" }, servers: "Unknown", countries: "3 regions", noLogs: "Claimed", jurisdiction: "Norway", streaming: "Poor", speeds: { download: 150, loss: 60, latency: 80 }, features: { killSwitch: false, splitTunnel: false, adBlock: true }, protocols: ["HTTPS Proxy"] }
        ];

        const QUICK_PICKS = [
            { category: "Best Overall", winner: "NordVPN", reason: "Excellent balance of features, privacy, and usability. Top performer in 2026 tests." },
            { category: "Best for Privacy", winner: "Mullvad", reason: "Open-source, strictly audited, and allows anonymous cash payments." },
            { category: "Best Value", winner: "Surfshark", reason: "Unlimited simultaneous connections and premium features at a budget price." },
            { category: "Best for Speed", winner: "NordVPN", reason: "Lowest latency and highest consistent throughput globally." }
        ];

        function App() {
            const [activeTab, setActiveTab] = useState('home');
            const [theme, setTheme] = useState('dark');
            const [favorites, setFavorites] = useState(() => JSON.parse(localStorage.getItem('vpn_compass_favs') || '[]'));
            const [showQuiz, setShowQuiz] = useState(false);

            useEffect(() => {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('vpn_compass_favs', JSON.stringify(favorites));
            }, [theme, favorites]);

            const toggleFav = (name) => setFavorites(f => f.includes(name) ? f.filter(n => n !== name) : [...f, name]);

            return (
                <div style={{ minHeight: '100vh' }}>
                    {/* Header */}
                    <header style={{ position: 'sticky', top: 0, zIndex: 1000, background: 'var(--color-bg)', borderBottom: '1px solid var(--color-border)', padding: '16px 24px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }} onClick={() => setActiveTab('home')} style={{cursor: 'pointer'}}>
                            <div style={{ width: '40px', height: '40px', background: 'var(--color-primary)', borderRadius: '8px', display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'white', fontWeight: 'bold' }}>V</div>
                            <h1 className="font-display" style={{ fontSize: '1.25rem' }}>VPN Compass</h1>
                        </div>
                        <div style={{ display: 'flex', gap: '10px' }}>
                            <button className="btn btn-secondary" onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}>{theme === 'dark' ? '‚òÄÔ∏è' : 'üåô'}</button>
                        </div>
                    </header>

                    <main style={{ maxWidth: '1400px', margin: '0 auto', padding: '0 24px 60px' }}>
                        {/* Phase 2 Navigation Tabs */}
                        <div className="tabs">
                            <button className={`tab ${activeTab === 'home' ? 'active' : ''}`} onClick={() => setActiveTab('home')}>Home</button>
                            <button className={`tab ${activeTab === 'comparison' ? 'active' : ''}`} onClick={() => setActiveTab('comparison')}>All VPNs (26)</button>
                            <button className={`tab ${activeTab === 'favorites' ? 'active' : ''}`} onClick={() => setActiveTab('favorites')}>Favorites ({favorites.length})</button>
                            <button className={`tab ${activeTab === 'speed' ? 'active' : ''}`} onClick={() => setActiveTab('speed')}>Speed Analysis</button>
                        </div>

                        <div style={{ marginBottom: '30px' }}>
                            <button className="btn btn-primary" onClick={() => setShowQuiz(true)}>üéØ VPN Finder Quiz</button>
                        </div>

                        {/* Views */}
                        {activeTab === 'home' && <HomeView onNavigate={setActiveTab} />}
                        {activeTab === 'comparison' && <ComparisonView vpns={ALL_VPN_DATA} favorites={favorites} onToggleFav={toggleFav} />}
                        {activeTab === 'favorites' && <ComparisonView vpns={ALL_VPN_DATA.filter(v => favorites.includes(v.name))} favorites={favorites} onToggleFav={toggleFav} isFavOnly={true} />}
                        {activeTab === 'speed' && <SpeedAnalysisView vpns={ALL_VPN_DATA} />}
                    </main>

                    {showQuiz && <QuizModal vpns={ALL_VPN_DATA} onClose={() => setShowQuiz(false)} onResult={(v) => {setActiveTab('comparison'); setShowQuiz(false);}} />}
                </div>
            );
        }

        // --- View Components ---

        function HomeView({ onNavigate }) {
            return (
                <div className="animate-fade-in-up">
                    <section className="hero">
                        <span className="font-mono" style={{ background: 'var(--color-primary)', color: 'white', padding: '6px 16px', borderRadius: '20px', fontSize: '0.8rem', fontWeight: 'bold' }}>VERSION 2026.1</span>
                        <h1 className="font-display" style={{ fontSize: 'clamp(2.5rem, 5vw, 4rem)', margin: '20px 0', lineHeight: 1.1 }}>Find Your Perfect VPN</h1>
                        <p style={{ color: 'var(--color-text-muted)', fontSize: '1.25rem', maxWidth: '750px', margin: '0 auto 40px' }}>
                            Independent testing across 26 major providers. We analyze speed, jurisdiction, and privacy audits so you don't have to.
                        </p>
                        <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', flexWrap: 'wrap' }}>
                            <button className="btn btn-primary" style={{ padding: '16px 36px' }} onClick={() => onNavigate('comparison')}>Compare 26 VPNs</button>
                            <button className="btn btn-secondary" style={{ padding: '16px 36px' }} onClick={() => onNavigate('speed')}>View Speed Data</button>
                        </div>
                    </section>

                    <h2 className="font-display" style={{ marginBottom: '30px', textAlign: 'center' }}>Top Recommendations</h2>
                    <div className="vpn-grid" style={{ marginBottom: '40px' }}>
                        {QUICK_PICKS.map((pick, i) => (
                            <div key={i} className="card" style={{ textAlign: 'center' }}>
                                <div className="font-mono" style={{ color: 'var(--color-primary)', fontSize: '0.8rem', fontWeight: 'bold', marginBottom: '10px' }}>{pick.category}</div>
                                <h3 className="font-display" style={{ fontSize: '1.5rem', marginBottom: '15px' }}>{pick.winner}</h3>
                                <p style={{ color: 'var(--color-text-muted)', fontSize: '0.9rem' }}>{pick.reason}</p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function ComparisonView({ vpns, favorites, onToggleFav, isFavOnly }) {
            const [search, setSearch] = useState('');
            const [minScore, setMinScore] = useState(0);

            const filtered = useMemo(() => {
                return vpns.filter(v => 
                    v.name.toLowerCase().includes(search.toLowerCase()) && 
                    v.overallScore >= minScore
                ).sort((a,b) => a.rank - b.rank);
            }, [vpns, search, minScore]);

            if (isFavOnly && vpns.length === 0) {
                return <div style={{ textAlign: 'center', padding: '100px 0', color: 'var(--color-text-muted)' }}>No favorites yet. Click the heart icon on any VPN card!</div>;
            }

            return (
                <div className="animate-fade-in-up">
                    <div className="card" style={{ marginBottom: '32px' }}>
                        <div className="filters-grid">
                            <div>
                                <label style={{ fontSize: '0.85rem', fontWeight: 'bold', display: 'block', marginBottom: '8px' }}>Search Provider</label>
                                <input type="text" placeholder="Search Nord, Proton, etc..." value={search} onChange={e => setSearch(e.target.value)} />
                            </div>
                            <div>
                                <label style={{ fontSize: '0.85rem', fontWeight: 'bold', display: 'block', marginBottom: '8px' }}>Min Score: {minScore}</label>
                                <input type="range" className="slider" min="0" max="100" value={minScore} onChange={e => setMinScore(parseInt(e.target.value))} />
                            </div>
                        </div>
                        <div style={{ fontSize: '0.9rem', color: 'var(--color-text-muted)' }}>Showing {filtered.length} of {vpns.length} Providers</div>
                    </div>

                    <div className="vpn-grid">
                        {filtered.map(vpn => (
                            <VPNCard key={vpn.name} vpn={vpn} isFav={favorites.includes(vpn.name)} onToggleFav={() => onToggleFav(vpn.name)} />
                        ))}
                    </div>
                </div>
            );
        }

        function VPNCard({ vpn, isFav, onToggleFav }) {
            const [expanded, setExpanded] = useState(false);
            const scoreClass = vpn.overallScore >= 85 ? 'score-excellent' : 'score-good';

            return (
                <div className="card">
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px' }}>
                        <div>
                            <span style={{ fontSize: '0.75rem', fontWeight: 'bold', color: 'var(--color-primary)' }}>RANK #{vpn.rank}</span>
                            <h3 className="font-display" style={{ fontSize: '1.4rem' }}>{vpn.name}</h3>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                            <button onClick={onToggleFav} style={{ background: 'none', border: 'none', fontSize: '1.5rem', cursor: 'pointer' }}>{isFav ? '‚ù§Ô∏è' : 'ü§ç'}</button>
                            <div className={`score-badge ${scoreClass}`}>{vpn.overallScore}</div>
                        </div>
                    </div>

                    <div style={{ marginBottom: '15px' }}>
                        <div style={{ fontSize: '0.85rem', fontWeight: 'bold', marginBottom: '4px' }}>Best For: {vpn.bestFor}</div>
                        <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>
                            <span className="badge">‚ö° {vpn.speeds.download} Mbps</span>
                            <span className="badge">üåç {vpn.countries} Countries</span>
                        </div>
                    </div>

                    <div style={{ background: 'var(--color-bg-tertiary)', padding: '12px', borderRadius: '8px', marginBottom: '20px' }}>
                        <div style={{ fontSize: '0.8rem', display: 'flex', justifyContent: 'space-between', marginBottom: '5px' }}>
                            <span>Monthly:</span> <b>{vpn.price.monthly}</b>
                        </div>
                        <div style={{ fontSize: '0.8rem', display: 'flex', justifyContent: 'space-between' }}>
                            <span>Annual:</span> <b style={{ color: 'var(--color-success)' }}>{vpn.price.annual}/mo</b>
                        </div>
                    </div>

                    {expanded && (
                        <div className="animate-fade-in-up" style={{ fontSize: '0.85rem', marginBottom: '20px', borderTop: '1px solid var(--color-border)', paddingTop: '15px' }}>
                            <p style={{ marginBottom: '8px' }}><b>Jurisdiction:</b> {vpn.jurisdiction}</p>
                            <p style={{ marginBottom: '8px' }}><b>Audits:</b> {vpn.noLogs}</p>
                            <p style={{ marginBottom: '8px' }}><b>Streaming:</b> {vpn.streaming}</p>
                            <p style={{ marginBottom: '8px' }}><b>Protocols:</b> {vpn.protocols.join(', ')}</p>
                            <div style={{ marginTop: '10px' }}>
                                <b>Key Features:</b>
                                <div style={{ display: 'flex', gap: '5px', flexWrap: 'wrap', marginTop: '5px' }}>
                                    {vpn.features.killSwitch && <span className="badge" style={{background: '#10B98122', color: '#10B981'}}>Kill Switch</span>}
                                    {vpn.features.splitTunnel && <span className="badge" style={{background: '#10B98122', color: '#10B981'}}>Split Tunnel</span>}
                                    {vpn.features.adBlock && <span className="badge" style={{background: '#10B98122', color: '#10B981'}}>Ad Block</span>}
                                </div>
                            </div>
                        </div>
                    )}

                    <button className="btn btn-primary" style={{ marginTop: 'auto' }} onClick={() => setExpanded(!expanded)}>
                        {expanded ? 'Show Less' : 'View Full Specs'}
                    </button>
                </div>
            );
        }

        function SpeedAnalysisView({ vpns }) {
            const canvasRef = useRef(null);
            const sortedBySpeed = [...vpns].sort((a,b) => b.speeds.download - a.speeds.download).slice(0, 15);

            useEffect(() => {
                if (canvasRef.current) {
                    const ctx = canvasRef.current.getContext('2d');
                    const chart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: sortedBySpeed.map(v => v.name),
                            datasets: [{
                                label: 'Download Speed (Mbps)',
                                data: sortedBySpeed.map(v => v.speeds.download),
                                backgroundColor: '#4F46E5',
                                borderRadius: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: { y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.05)' } } }
                        }
                    });
                    return () => chart.destroy();
                }
            }, []);

            return (
                <div className="animate-fade-in-up">
                    <div className="card" style={{ marginBottom: '30px' }}>
                        <h2 className="font-display" style={{ marginBottom: '20px' }}>Speed Benchmark (Top 15)</h2>
                        <div style={{ height: '400px' }}>
                            <canvas ref={canvasRef}></canvas>
                        </div>
                    </div>

                    <div className="card">
                        <h2 className="font-display" style={{ marginBottom: '20px' }}>Full Speed Table</h2>
                        <div className="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Provider</th>
                                        <th>Download</th>
                                        <th>Latency</th>
                                        <th>Speed Loss</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {vpns.sort((a,b) => b.speeds.download - a.speeds.download).map(vpn => (
                                        <tr key={vpn.name}>
                                            <td><b>{vpn.name}</b></td>
                                            <td className="font-mono">{vpn.speeds.download} Mbps</td>
                                            <td className="font-mono">{vpn.speeds.latency}ms</td>
                                            <td>
                                                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                                                    <div style={{ flex: 1, height: '6px', background: 'var(--color-bg-tertiary)', borderRadius: '3px' }}>
                                                        <div style={{ width: `${vpn.speeds.loss}%`, height: '100%', background: vpn.speeds.loss < 20 ? 'var(--color-success)' : 'var(--color-danger)', borderRadius: '3px' }}></div>
                                                    </div>
                                                    <span style={{ fontSize: '0.8rem' }}>{vpn.speeds.loss}%</span>
                                                </div>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        }

        function QuizModal({ vpns, onClose, onResult }) {
            const [step, setStep] = useState(0);
            const questions = [
                { q: "What is your main goal?", options: ["Maximum Privacy", "Streaming Content", "Gaming Speed", "Low Budget"] },
                { q: "How many devices do you have?", options: ["1-3", "4-7", "Unlimited"] }
            ];

            const getRecommendation = () => {
                // Simple logic: returns NordVPN or Surfshark for demo
                return vpns[0];
            };

            return (
                <div className="modal-overlay">
                    <div className="modal">
                        <h2 className="font-display" style={{ marginBottom: '20px' }}>VPN Finder Quiz</h2>
                        <div style={{ marginBottom: '30px' }}>
                            <h3 style={{ marginBottom: '20px' }}>{questions[step]?.q}</h3>
                            <div style={{ display: 'grid', gap: '12px' }}>
                                {questions[step]?.options.map(opt => (
                                    <button key={opt} className="btn btn-secondary" onClick={() => step < 1 ? setStep(s => s + 1) : onResult(getRecommendation())}>
                                        {opt}
                                    </button>
                                ))}
                            </div>
                        </div>
                        <button className="btn btn-secondary" style={{ width: '100%' }} onClick={onClose}>Cancel</button>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
