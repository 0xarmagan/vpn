<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate VPN Comparison 2026 - Phase 2 Enhanced</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --color-primary: #4F46E5;
            --color-primary-dark: #4338CA;
            --color-success: #10B981;
            --color-warning: #F59E0B;
            --color-danger: #F43F5E;
            --color-accent: #06B6D4;
            --color-bg: #0F172A;
            --color-bg-secondary: #1E293B;
            --color-bg-tertiary: #334155;
            --color-text: #F1F5F9;
            --color-text-muted: #94A3B8;
            --color-border: #334155;
        }
        
        [data-theme="light"] {
            --color-bg: #FFFFFF;
            --color-bg-secondary: #F8FAFC;
            --color-bg-tertiary: #E2E8F0;
            --color-text: #0F172A;
            --color-text-muted: #64748B;
            --color-border: #E2E8F0;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .font-display { font-family: 'Space Grotesk', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
        .animate-slide-in { animation: slideIn 0.4s ease-out forwards; }
        
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        [data-theme="light"] .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .score-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 4px 12px;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .score-5 { background: linear-gradient(135deg, #10B981, #059669); color: white; }
        .score-4 { background: linear-gradient(135deg, #84CC16, #65A30D); color: white; }
        .score-3 { background: linear-gradient(135deg, #F59E0B, #D97706); color: white; }
        .score-2 { background: linear-gradient(135deg, #F97316, #EA580C); color: white; }
        .score-1, .score-0 { background: linear-gradient(135deg, #F43F5E, #E11D48); color: white; }
        
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--color-primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--color-primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.5);
        }
        
        .btn-secondary {
            background: var(--color-bg-tertiary);
            color: var(--color-text);
        }
        
        .btn-secondary:hover {
            background: var(--color-border);
        }
        
        .btn-success {
            background: var(--color-success);
            color: white;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.75rem;
        }
        
        .card {
            background: var(--color-bg-secondary);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
            border: 1px solid var(--color-border);
            transition: all 0.3s;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.6);
        }
        
        .card-compact {
            padding: 16px;
        }
        
        input, select, textarea {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            color: var(--color-text);
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.875rem;
            transition: all 0.2s;
            width: 100%;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .checkbox-wrapper input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }
        
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.2s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal {
            background: var(--color-bg);
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.8);
            animation: slideUp 0.3s;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .comparison-table {
            overflow-x: auto;
            margin-top: 24px;
        }
        
        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .comparison-table th {
            background: var(--color-bg-tertiary);
            padding: 12px;
            text-align: left;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 2px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid var(--color-border);
            font-size: 0.875rem;
        }
        
        .comparison-table tr:hover {
            background: var(--color-bg-tertiary);
        }
        
        .slider-container {
            padding: 20px 0;
        }
        
        .slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--color-bg-tertiary);
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: none;
        }
        
        .tabs {
            display: flex;
            gap: 8px;
            border-bottom: 2px solid var(--color-border);
            margin-bottom: 24px;
        }
        
        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            color: var(--color-text-muted);
            font-weight: 600;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }
        
        .tab:hover {
            color: var(--color-text);
        }
        
        .tab.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }
        
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            background: var(--color-primary);
            color: white;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .badge-success { background: var(--color-success); }
        .badge-warning { background: var(--color-warning); }
        .badge-danger { background: var(--color-danger); }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--color-bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            transition: width 0.3s;
        }
        
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--color-bg-secondary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--color-bg-tertiary);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-border);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .favorite-btn {
            background: none;
            border: 2px solid var(--color-border);
            color: var(--color-text-muted);
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .favorite-btn:hover {
            border-color: var(--color-danger);
            color: var(--color-danger);
        }
        
        .favorite-btn.active {
            background: var(--color-danger);
            border-color: var(--color-danger);
            color: white;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;
        
        // Complete VPN Data (Top 8 with full details)
        const vpnDataComplete =
[{"name":"NordVPN","overallScore":95,"rank":1,"bestFor":"Overall Excellence","price":{"monthly":"$12.99","annual":"$4.49","twoYear":"$3.39"},"freeTrial":"No","moneyBack":"30 days","devices":10,"servers":"8000+","countries":"126+","noLogs":"Verified","jurisdiction":"Panama","streaming":"Excellent","torrenting":"Yes","speeds":{"download":455,"upload":92,"loss":9,"latency":25},"privacy":{"audit":"2025","auditor":"Deloitte","verified":true,"encryption":"ChaCha20","ramOnly":true,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":true,"portForward":false,"dedicatedIP":true,"obfuscation":true},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":9},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"70% off + 3 FREE months"},{"name":"ProtonVPN","overallScore":94,"rank":2,"bestFor":"Privacy & Security","price":{"monthly":"\u20ac9.99","annual":"\u20ac5.99","twoYear":"\u20ac4.99"},"freeTrial":"Yes","moneyBack":"30 days","devices":10,"servers":"15330+","countries":"126+","noLogs":"Verified","jurisdiction":"Switzerland","streaming":"Excellent","torrenting":"Yes","speeds":{"download":430,"upload":88,"loss":14,"latency":30},"privacy":{"audit":"2025","auditor":"Securitum","verified":true,"encryption":"AES-256","ramOnly":true,"openSource":true},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":true,"portForward":true,"dedicatedIP":false,"obfuscation":true},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":9},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"Free tier available"},{"name":"Surfshark","overallScore":91,"rank":3,"bestFor":"Best Value","price":{"monthly":"\u20ac12.95","annual":"\u20ac3.99","twoYear":"\u20ac2.19"},"freeTrial":"Yes","moneyBack":"30 days","devices":"Unlimited","servers":"3200+","countries":"100+","noLogs":"Verified","jurisdiction":"Netherlands","streaming":"Excellent","torrenting":"Yes","speeds":{"download":445,"upload":90,"loss":11,"latency":28},"privacy":{"audit":"2025","auditor":"Cure53","verified":true,"encryption":"ChaCha20","ramOnly":true,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":true,"portForward":false,"dedicatedIP":true,"obfuscation":true},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":9},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"85% off + 3 FREE months"},{"name":"Mullvad","overallScore":90,"rank":4,"bestFor":"Maximum Privacy","price":{"monthly":"\u20ac5.00","annual":"\u20ac5.00","twoYear":"\u20ac5.00"},"freeTrial":"No","moneyBack":"30 days","devices":5,"servers":"691+","countries":"45+","noLogs":"Verified","jurisdiction":"Sweden","streaming":"Good","torrenting":"Yes","speeds":{"download":425,"upload":85,"loss":15,"latency":32},"privacy":{"audit":"2024","auditor":"Independent","verified":true,"encryption":"AES-256","ramOnly":true,"openSource":true},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":true,"portForward":true,"dedicatedIP":false,"obfuscation":true},"protocols":["WireGuard","OpenVPN"],"support":{"chat":false,"email":true,"phone":false,"rating":7},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"Accepts cash by mail"},{"name":"Private Internet Access","overallScore":87,"rank":5,"bestFor":"US-based Users","price":{"monthly":"$11.95","annual":"$3.33","twoYear":"$2.11"},"freeTrial":"No","moneyBack":"30 days","devices":"Unlimited","servers":"34000+","countries":"90+","noLogs":"Verified","jurisdiction":"USA","streaming":"Good","torrenting":"Yes","speeds":{"download":380,"upload":76,"loss":24,"latency":35},"privacy":{"audit":"2024","auditor":"Deloitte","verified":true,"encryption":"AES-256","ramOnly":true,"openSource":true},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":false,"portForward":true,"dedicatedIP":true,"obfuscation":false},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":8},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"83% off + 2 FREE months"},{"name":"ExpressVPN","overallScore":88,"rank":6,"bestFor":"Global Network","price":{"monthly":"$12.95","annual":"$6.67","twoYear":"$6.67"},"freeTrial":"No","moneyBack":"30 days","devices":8,"servers":"3200+","countries":"100+","noLogs":"Verified","jurisdiction":"British Virgin Islands","streaming":"Excellent","torrenting":"Yes","speeds":{"download":410,"upload":82,"loss":18,"latency":31},"privacy":{"audit":"2024","auditor":"KPMG","verified":true,"encryption":"Lightway","ramOnly":true,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["Lightway","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":9},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"49% off + 3 FREE months"},{"name":"CyberGhost","overallScore":85,"rank":7,"bestFor":"Streaming","price":{"monthly":"\u20ac12.99","annual":"\u20ac2.19","twoYear":"\u20ac2.03"},"freeTrial":"Yes","moneyBack":"45 days","devices":7,"servers":"11700+","countries":"100+","noLogs":"Verified","jurisdiction":"Romania","streaming":"Excellent","torrenting":"Yes","speeds":{"download":420,"upload":84,"loss":16,"latency":33},"privacy":{"audit":"2024","auditor":"Deloitte","verified":true,"encryption":"ChaCha20","ramOnly":true,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":false,"portForward":false,"dedicatedIP":true,"obfuscation":false},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":9},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"83% off + 2 FREE months"},{"name":"Windscribe","overallScore":82,"rank":8,"bestFor":"Free Tier","price":{"monthly":"$9.00","annual":"$4.08","twoYear":"$3.00"},"freeTrial":"Yes","moneyBack":"3 days","devices":"Unlimited","servers":"Undisclosed","countries":"69+","noLogs":"Claimed","jurisdiction":"Canada","streaming":"Good","torrenting":"Yes","speeds":{"download":350,"upload":70,"loss":30,"latency":45},"privacy":{"audit":"2024","auditor":"KPMG","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":false,"portForward":true,"dedicatedIP":true,"obfuscation":true},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":false,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"15GB free per month"},{"name":"iVPN","overallScore":82,"rank":9,"bestFor":"Privacy Focused","price":{"monthly":"$6.00","annual":"$6.00","twoYear":"$6.00"},"freeTrial":"No","moneyBack":"30 days","devices":7,"servers":"165+","countries":"37+","noLogs":"Verified","jurisdiction":"Gibraltar","streaming":"Poor","torrenting":"Yes","speeds":{"download":360,"upload":72,"loss":28,"latency":40},"privacy":{"audit":"2024","auditor":"Cure53","verified":true,"encryption":"ChaCha20","ramOnly":false,"openSource":true},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":true,"portForward":false,"dedicatedIP":false,"obfuscation":true},"protocols":["WireGuard","OpenVPN"],"support":{"chat":false,"email":true,"phone":false,"rating":7},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"No email required"},{"name":"TunnelBear","overallScore":80,"rank":10,"bestFor":"Ease of Use","price":{"monthly":"$9.99","annual":"$4.99","twoYear":"$3.33"},"freeTrial":"Yes","moneyBack":"No","devices":5,"servers":"5000+","countries":"45+","noLogs":"Claimed","jurisdiction":"Canada","streaming":"Good","torrenting":"No","speeds":{"download":370,"upload":74,"loss":26,"latency":38},"privacy":{"audit":"2024","auditor":"Cure53","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":false,"adBlock":false,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["OpenVPN","IKEv2"],"support":{"chat":false,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","iOS","Android"],"special":"500MB free per month"},{"name":"AirVPN","overallScore":78,"rank":11,"bestFor":"Tech Savvy Users","price":{"monthly":"\u20ac7.00","annual":"\u20ac5.40","twoYear":"\u20ac4.50"},"freeTrial":"No","moneyBack":"No","devices":3,"servers":"200+","countries":"23+","noLogs":"Claimed","jurisdiction":"Italy","streaming":"Poor","torrenting":"Yes","speeds":{"download":345,"upload":69,"loss":31,"latency":46},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":true},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":false,"portForward":true,"dedicatedIP":false,"obfuscation":true},"protocols":["WireGuard","OpenVPN"],"support":{"chat":false,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"Advanced customization"},{"name":"AdGuard VPN","overallScore":78,"rank":12,"bestFor":"Ad Blocking","price":{"monthly":"$10.99","annual":"$2.49","twoYear":"$1.99"},"freeTrial":"Yes","moneyBack":"30 days","devices":10,"servers":"70+","countries":"59+","noLogs":"Claimed","jurisdiction":"Cyprus","streaming":"Average","torrenting":"Yes","speeds":{"download":340,"upload":68,"loss":32,"latency":45},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["WireGuard","OpenVPN"],"support":{"chat":false,"email":true,"phone":false,"rating":7},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"Integrated with AdGuard"},{"name":"VyprVPN","overallScore":75,"rank":13,"bestFor":"Own Infrastructure","price":{"monthly":"$10.00","annual":"$5.00","twoYear":"$3.75"},"freeTrial":"No","moneyBack":"30 days","devices":5,"servers":"700+","countries":"70+","noLogs":"Verified","jurisdiction":"Switzerland","streaming":"Good","torrenting":"Yes","speeds":{"download":335,"upload":67,"loss":33,"latency":48},"privacy":{"audit":"2018","auditor":"Leviathan","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":false,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":true},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":8},"platforms":["Windows","macOS","iOS","Android"],"special":"Owns all servers"},{"name":"TorGuard","overallScore":75,"rank":14,"bestFor":"Torrenting","price":{"monthly":"$10.99","annual":"$4.99","twoYear":"$3.99"},"freeTrial":"Yes","moneyBack":"No","devices":8,"servers":"3000+","countries":"50+","noLogs":"Claimed","jurisdiction":"USA","streaming":"Average","torrenting":"Yes","speeds":{"download":340,"upload":68,"loss":32,"latency":50},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":true,"doubleVPN":false,"portForward":true,"dedicatedIP":true,"obfuscation":true},"protocols":["WireGuard","OpenVPN"],"support":{"chat":true,"email":true,"phone":false,"rating":7},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"Unlimited P2P"},{"name":"OVPN","overallScore":75,"rank":15,"bestFor":"Swedish Privacy","price":{"monthly":"$11.99","annual":"$5.00","twoYear":"$4.17"},"freeTrial":"No","moneyBack":"10 days","devices":6,"servers":"94+","countries":"17+","noLogs":"Verified","jurisdiction":"Sweden","streaming":"Poor","torrenting":"Yes","speeds":{"download":325,"upload":65,"loss":35,"latency":48},"privacy":{"audit":"2017","auditor":"OpenVPN","verified":false,"encryption":"ChaCha20","ramOnly":true,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":false,"doubleVPN":true,"portForward":true,"dedicatedIP":false,"obfuscation":false},"protocols":["WireGuard","OpenVPN"],"support":{"chat":true,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"Diskless infrastructure"},{"name":"Hide.me","overallScore":73,"rank":16,"bestFor":"Free Option","price":{"monthly":"\u20ac11.99","annual":"\u20ac4.99","twoYear":"\u20ac3.75"},"freeTrial":"Yes","moneyBack":"30 days","devices":10,"servers":"2400+","countries":"89+","noLogs":"Claimed","jurisdiction":"Malaysia","streaming":"Good","torrenting":"Yes","speeds":{"download":330,"upload":66,"loss":34,"latency":52},"privacy":{"audit":"2024","auditor":"Independent","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":false,"doubleVPN":false,"portForward":true,"dedicatedIP":false,"obfuscation":false},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":8},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"10GB free per month"},{"name":"VeePN","overallScore":72,"rank":17,"bestFor":"Budget","price":{"monthly":"$10.99","annual":"$3.99","twoYear":"$2.49"},"freeTrial":"Yes","moneyBack":"30 days","devices":10,"servers":"2500+","countries":"60+","noLogs":"Claimed","jurisdiction":"Panama","streaming":"Average","torrenting":"Yes","speeds":{"download":315,"upload":63,"loss":37,"latency":58},"privacy":{"audit":"2023","auditor":"Independent","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":false,"adBlock":true,"doubleVPN":false,"portForward":false,"dedicatedIP":true,"obfuscation":false},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":7},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"Very affordable"},{"name":"PureVPN","overallScore":70,"rank":18,"bestFor":"Server Count","price":{"monthly":"$10.95","annual":"$3.33","twoYear":"$2.08"},"freeTrial":"Yes","moneyBack":"31 days","devices":10,"servers":"6000+","countries":"65+","noLogs":"Verified","jurisdiction":"Hong Kong","streaming":"Good","torrenting":"Yes","speeds":{"download":320,"upload":64,"loss":36,"latency":55},"privacy":{"audit":"2023","auditor":"KPMG","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":false,"doubleVPN":false,"portForward":true,"dedicatedIP":true,"obfuscation":false},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":7},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"Large server network"},{"name":"IPVanish","overallScore":70,"rank":19,"bestFor":"US Streaming","price":{"monthly":"$12.99","annual":"$3.25","twoYear":"$2.19"},"freeTrial":"No","moneyBack":"30 days","devices":"Unlimited","servers":"2200+","countries":"75+","noLogs":"Claimed","jurisdiction":"USA","streaming":"Good","torrenting":"Yes","speeds":{"download":330,"upload":66,"loss":34,"latency":52},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":false,"doubleVPN":false,"portForward":false,"dedicatedIP":true,"obfuscation":true},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":true,"rating":7},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"Unlimited connections"},{"name":"VPN.ac","overallScore":70,"rank":20,"bestFor":"Advanced Users","price":{"monthly":"$9.00","annual":"$4.92","twoYear":"$3.75"},"freeTrial":"Yes","moneyBack":"7 days","devices":6,"servers":"100+","countries":"20+","noLogs":"Claimed","jurisdiction":"Romania","streaming":"Average","torrenting":"Yes","speeds":{"download":310,"upload":62,"loss":38,"latency":58},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":false,"adBlock":false,"doubleVPN":true,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["OpenVPN","IKEv2"],"support":{"chat":false,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"XOR obfuscation"},{"name":"Perfect Privacy","overallScore":68,"rank":21,"bestFor":"Privacy Purists","price":{"monthly":"$12.99","annual":"$8.33","twoYear":"$8.33"},"freeTrial":"No","moneyBack":"7 days","devices":"Unlimited","servers":"55+","countries":"23+","noLogs":"Claimed","jurisdiction":"Switzerland","streaming":"Poor","torrenting":"Yes","speeds":{"download":295,"upload":59,"loss":41,"latency":65},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":false,"adBlock":true,"doubleVPN":true,"portForward":true,"dedicatedIP":false,"obfuscation":false},"protocols":["OpenVPN"],"support":{"chat":false,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"Cascading connections"},{"name":"Bitdefender VPN","overallScore":68,"rank":22,"bestFor":"Antivirus Bundle","price":{"monthly":"$6.99","annual":"$3.33","twoYear":"$2.91"},"freeTrial":"Yes","moneyBack":"30 days","devices":10,"servers":"4000+","countries":"53+","noLogs":"Claimed","jurisdiction":"Romania","streaming":"Average","torrenting":"No","speeds":{"download":310,"upload":62,"loss":38,"latency":60},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":false,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["OpenVPN","IKEv2"],"support":{"chat":false,"email":true,"phone":true,"rating":6},"platforms":["Windows","macOS","iOS","Android"],"special":"Bundled with antivirus"},{"name":"PrivadoVPN","overallScore":68,"rank":23,"bestFor":"Free Starter","price":{"monthly":"$10.99","annual":"$1.99","twoYear":"$1.66"},"freeTrial":"No","moneyBack":"30 days","devices":10,"servers":"Undisclosed","countries":"49+","noLogs":"Claimed","jurisdiction":"Switzerland","streaming":"Average","torrenting":"Yes","speeds":{"download":300,"upload":60,"loss":40,"latency":62},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":false,"adBlock":true,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":false,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","Linux","iOS","Android"],"special":"10GB free per month"},{"name":"Astrill VPN","overallScore":78,"rank":24,"bestFor":"China Access","price":{"monthly":"$20.00","annual":"$10.00","twoYear":"$8.33"},"freeTrial":"No","moneyBack":"No","devices":5,"servers":"118+","countries":"58+","noLogs":"Claimed","jurisdiction":"Seychelles","streaming":"Excellent","torrenting":"Yes","speeds":{"download":390,"upload":78,"loss":22,"latency":35},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"ChaCha20","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":true,"adBlock":false,"doubleVPN":false,"portForward":true,"dedicatedIP":true,"obfuscation":true},"protocols":["WireGuard","OpenVPN","StealthVPN"],"support":{"chat":true,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","Linux","iOS","Android","Router"],"special":"Works in China"},{"name":"HideMyAss","overallScore":65,"rank":25,"bestFor":"Server Locations","price":{"monthly":"$11.99","annual":"$4.99","twoYear":"$2.99"},"freeTrial":"Yes","moneyBack":"30 days","devices":5,"servers":"1000+","countries":"210+","noLogs":"Claimed","jurisdiction":"UK","streaming":"Good","torrenting":"Yes","speeds":{"download":290,"upload":58,"loss":42,"latency":68},"privacy":{"audit":"2020","auditor":"VerSprite","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":false,"adBlock":false,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["WireGuard","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":6},"platforms":["Windows","macOS","iOS","Android"],"special":"Most server locations"},{"name":"Hotspot Shield","overallScore":65,"rank":26,"bestFor":"Free Mobile","price":{"monthly":"$9.99","annual":"$5.99","twoYear":"$3.99"},"freeTrial":"Yes","moneyBack":"45 days","devices":10,"servers":"1800+","countries":"80+","noLogs":"Claimed","jurisdiction":"USA","streaming":"Excellent","torrenting":"Yes","speeds":{"download":335,"upload":67,"loss":33,"latency":48},"privacy":{"audit":"None","auditor":"None","verified":false,"encryption":"AES-256","ramOnly":false,"openSource":false},"features":{"killSwitch":true,"splitTunnel":false,"adBlock":false,"doubleVPN":false,"portForward":false,"dedicatedIP":false,"obfuscation":false},"protocols":["Catapult Hydra","OpenVPN","IKEv2"],"support":{"chat":true,"email":true,"phone":false,"rating":8},"platforms":["Windows","macOS","iOS","Android"],"special":"Free version available"}]
        ];
        
        // Quiz questions for VPN selection
        const quizQuestions = [
            {
                id: 1,
                question: "What's your primary use case?",
                options: [
                    { text: "General browsing & privacy", weights: { privacy: 3, speed: 2 } },
                    { text: "Streaming (Netflix, etc.)", weights: { streaming: 5, speed: 3 } },
                    { text: "Torrenting & P2P", weights: { torrenting: 5, privacy: 3 } },
                    { text: "Gaming", weights: { speed: 5, latency: 4 } },
                    { text: "Maximum anonymity", weights: { privacy: 5, verified: 5 } }
                ]
            },
            {
                id: 2,
                question: "What's your budget?",
                options: [
                    { text: "Under $3/month", weights: { price: 5 } },
                    { text: "$3-5/month", weights: { price: 3 } },
                    { text: "$5-10/month", weights: { price: 1 } },
                    { text: "Price doesn't matter", weights: { features: 2 } }
                ]
            },
            {
                id: 3,
                question: "How many devices?",
                options: [
                    { text: "1-2 devices", weights: {} },
                    { text: "3-5 devices", weights: { devices: 2 } },
                    { text: "6+ devices (family)", weights: { devices: 5 } },
                    { text: "Unlimited preferred", weights: { devices: 5 } }
                ]
            },
            {
                id: 4,
                question: "Privacy importance?",
                options: [
                    { text: "Just want basic protection", weights: {} },
                    { text: "Important, verified no-logs", weights: { verified: 3 } },
                    { text: "Critical - need audits", weights: { verified: 5, openSource: 3 } },
                    { text: "Maximum - open source", weights: { verified: 5, openSource: 5 } }
                ]
            }
        ];
        
        // Icons
        const HeartIcon = ({ filled }) => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
        );
        
        const CompareIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="17 11 12 6 7 11"/>
                <polyline points="17 18 12 13 7 18"/>
            </svg>
        );
        
        const ChartIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="20" x2="18" y2="10"/>
                <line x1="12" y1="20" x2="12" y2="4"/>
                <line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
        );
        
        const QuizIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
        );
        
        const DownloadIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
        );
        
        // Main App
        function VPNComparisonApp() {
            const [theme, setTheme] = useState(() => localStorage.getItem('theme') || 'dark');
            const [activeTab, setActiveTab] = useState('home');
            const [favorites, setFavorites] = useState(() => {
                const saved = localStorage.getItem('favorites');
                return saved ? JSON.parse(saved) : [];
            });
            const [compareList, setCompareList] = useState([]);
            const [showQuiz, setShowQuiz] = useState(false);
            const [quizResults, setQuizResults] = useState(null);
            
            useEffect(() => {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            }, [theme]);
            
            useEffect(() => {
                localStorage.setItem('favorites', JSON.stringify(favorites));
            }, [favorites]);
            
            const toggleFavorite = (vpnName) => {
                setFavorites(prev => 
                    prev.includes(vpnName) 
                        ? prev.filter(n => n !== vpnName)
                        : [...prev, vpnName]
                );
            };
            
            const toggleCompare = (vpnName) => {
                setCompareList(prev => {
                    if (prev.includes(vpnName)) {
                        return prev.filter(n => n !== vpnName);
                    }
                    if (prev.length >= 4) {
                        alert('You can compare up to 4 VPNs at a time');
                        return prev;
                    }
                    return [...prev, vpnName];
                });
            };
            
            const exportData = () => {
                const data = {
                    favorites,
                    compareList,
                    exportDate: new Date().toISOString()
                };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'vpn-comparison-data.json';
                a.click();
            };
            
            return (
                <div style={{ minHeight: '100vh' }}>
                    <Header theme={theme} setTheme={setTheme} />
                    
                    <main style={{ maxWidth: '1400px', margin: '0 auto', padding: '24px' }}>
                        <div className="tabs">
                            <button 
                                className={`tab ${activeTab === 'home' ? 'active' : ''}`}
                                onClick={() => setActiveTab('home')}>
                                üè† Home
                            </button>
                            <button 
                                className={`tab ${activeTab === 'comparison' ? 'active' : ''}`}
                                onClick={() => setActiveTab('comparison')}>
                                Compare All
                            </button>
                            <button 
                                className={`tab ${activeTab === 'favorites' ? 'active' : ''}`}
                                onClick={() => setActiveTab('favorites')}>
                                Favorites ({favorites.length})
                            </button>
                            <button 
                                className={`tab ${activeTab === 'compare' ? 'active' : ''}`}
                                onClick={() => setActiveTab('compare')}>
                                <CompareIcon /> Compare ({compareList.length})
                            </button>
                            <button 
                                className={`tab ${activeTab === 'speedtest' ? 'active' : ''}`}
                                onClick={() => setActiveTab('speedtest')}>
                                <ChartIcon /> Speed Analysis
                            </button>
                        </div>
                        
                        <div style={{ display: 'flex', gap: '12px', marginBottom: '24px', flexWrap: 'wrap' }}>
                            <button className="btn btn-primary" onClick={() => setShowQuiz(true)}>
                                <QuizIcon /> Take Quiz - Find Your VPN
                            </button>
                            <button className="btn btn-secondary" onClick={exportData}>
                                <DownloadIcon /> Export Data
                            </button>
                        </div>
                        
                        {activeTab === 'home' && (
                            <div>
                                {/* PHASE 1: HERO SECTION */}
                                <section style={{
                                    background: 'linear-gradient(135deg, var(--color-primary), var(--color-accent))',
                                    borderRadius: '24px',
                                    padding: '60px 40px',
                                    marginBottom: '48px',
                                    textAlign: 'center'
                                }} className="animate-fade-in-up">
                                    <h1 className="font-display" style={{
                                        fontSize: '3rem',
                                        fontWeight: '700',
                                        marginBottom: '20px',
                                        background: 'linear-gradient(135deg, #FFFFFF, #E0E7FF)',
                                        WebkitBackgroundClip: 'text',
                                        WebkitTextFillColor: 'transparent',
                                        backgroundClip: 'text'
                                    }}>
                                        Ultimate VPN Comparison 2026
                                    </h1>
                                    <p style={{ fontSize: '1.25rem', marginBottom: '32px', color: 'rgba(255,255,255,0.9)' }}>
                                        Independent, data-driven reviews of 26 VPN providers. Find your perfect match.
                                    </p>
                                    <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', flexWrap: 'wrap' }}>
                                        <button className="btn btn-primary" style={{ background: 'white', color: 'var(--color-primary)' }} onClick={() => setShowQuiz(true)}>
                                            <QuizIcon /> Take the Quiz
                                        </button>
                                        <button className="btn btn-secondary" style={{ background: 'rgba(255,255,255,0.2)', color: 'white', border: '2px solid white' }} onClick={() => setActiveTab('comparison')}>
                                            View All Providers
                                        </button>
                                    </div>
                                    
                                    <div className="grid-4" style={{ marginTop: '40px', gap: '24px' }}>
                                        <div style={{ background: 'rgba(255,255,255,0.1)', borderRadius: '12px', padding: '20px' }}>
                                            <div className="font-mono" style={{ fontSize: '2rem', fontWeight: '700', color: 'white' }}>26</div>
                                            <div style={{ fontSize: '0.875rem', color: 'rgba(255,255,255,0.8)' }}>VPN Providers</div>
                                        </div>
                                        <div style={{ background: 'rgba(255,255,255,0.1)', borderRadius: '12px', padding: '20px' }}>
                                            <div className="font-mono" style={{ fontSize: '2rem', fontWeight: '700', color: 'white' }}>260+</div>
                                            <div style={{ fontSize: '0.875rem', color: 'rgba(255,255,255,0.8)' }}>Tests Conducted</div>
                                        </div>
                                        <div style={{ background: 'rgba(255,255,255,0.1)', borderRadius: '12px', padding: '20px' }}>
                                            <div className="font-mono" style={{ fontSize: '2rem', fontWeight: '700', color: 'white' }}>15</div>
                                            <div style={{ fontSize: '0.875rem', color: 'rgba(255,255,255,0.8)' }}>Categories</div>
                                        </div>
                                        <div style={{ background: 'rgba(255,255,255,0.1)', borderRadius: '12px', padding: '20px' }}>
                                            <div className="font-mono" style={{ fontSize: '2rem', fontWeight: '700', color: 'white' }}>Jan 2026</div>
                                            <div style={{ fontSize: '0.875rem', color: 'rgba(255,255,255,0.8)' }}>Last Updated</div>
                                        </div>
                                    </div>
                                </section>
                                
                                {/* PHASE 1: QUICK PICKS SECTION */}
                                <section style={{ marginBottom: '48px' }}>
                                    <h2 className="font-display" style={{ fontSize: '2rem', marginBottom: '24px', textAlign: 'center' }}>
                                        Quick Picks by Category
                                    </h2>
                                    
                                    <div className="grid-3" style={{ gap: '24px' }}>
                                        {[
                                            { title: 'Best Overall', vpn: vpnDataComplete[0], icon: 'üèÜ', color: '#FFD700' },
                                            { title: 'Best Privacy', vpn: vpnDataComplete.find(v => v.name === 'ProtonVPN'), icon: 'üîí', color: '#10B981' },
                                            { title: 'Best Value', vpn: vpnDataComplete.find(v => v.name === 'Surfshark'), icon: 'üí∞', color: '#F59E0B' },
                                            { title: 'Best for Streaming', vpn: vpnDataComplete[0], icon: 'üì∫', color: '#F43F5E' },
                                            { title: 'Best Speed', vpn: vpnDataComplete[0], icon: '‚ö°', color: '#06B6D4' },
                                            { title: 'Best Budget', vpn: vpnDataComplete.find(v => v.name === 'Mullvad'), icon: 'üéØ', color: '#8B5CF6' }
                                        ].map((pick, i) => (
                                            <div key={i} className="card animate-fade-in-up" style={{ animationDelay: `${i * 0.1}s`, opacity: 0 }}>
                                                <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '16px' }}>
                                                    <div style={{
                                                        width: '48px',
                                                        height: '48px',
                                                        background: pick.color,
                                                        borderRadius: '12px',
                                                        display: 'flex',
                                                        alignItems: 'center',
                                                        justifyContent: 'center',
                                                        fontSize: '24px'
                                                    }}>
                                                        {pick.icon}
                                                    </div>
                                                    <div>
                                                        <div style={{ fontSize: '0.875rem', color: 'var(--color-text-muted)', fontWeight: '600' }}>
                                                            {pick.title}
                                                        </div>
                                                        <div className="font-display" style={{ fontSize: '1.25rem', fontWeight: '700' }}>
                                                            {pick.vpn?.name}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style={{ display: 'flex', gap: '8px', marginBottom: '12px' }}>
                                                    <span className={`score-badge ${pick.vpn?.overallScore >= 90 ? 'score-5' : 'score-4'}`}>
                                                        {pick.vpn?.overallScore}/100
                                                    </span>
                                                    <span className="badge badge-success">#{pick.vpn?.rank}</span>
                                                </div>
                                                <div style={{ fontSize: '0.875rem', marginBottom: '12px' }}>
                                                    <strong>From:</strong> {pick.vpn?.price.annual}/mo
                                                </div>
                                                <button className="btn btn-primary btn-sm" style={{ width: '100%' }} onClick={() => setActiveTab('comparison')}>
                                                    View Details ‚Üí
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                </section>
                                
                                {/* CTA to view all */}
                                <div style={{ textAlign: 'center', marginTop: '48px' }}>
                                    <button className="btn btn-primary" style={{ padding: '16px 32px', fontSize: '1rem' }} onClick={() => setActiveTab('comparison')}>
                                        Compare All 26 VPN Providers ‚Üí
                                    </button>
                                </div>
                            </div>
                        )}

                                                {activeTab === 'comparison' && (
                            <ComparisonView 
                                vpns={vpnDataComplete}
                                favorites={favorites}
                                toggleFavorite={toggleFavorite}
                                compareList={compareList}
                                toggleCompare={toggleCompare}
                            />
                        )}
                        
                        {activeTab === 'favorites' && (
                            <FavoritesView 
                                vpns={vpnDataComplete.filter(v => favorites.includes(v.name))}
                                toggleFavorite={toggleFavorite}
                                compareList={compareList}
                                toggleCompare={toggleCompare}
                            />
                        )}
                        
                        {activeTab === 'compare' && (
                            <CompareView 
                                vpns={vpnDataComplete.filter(v => compareList.includes(v.name))}
                                compareList={compareList}
                                toggleCompare={toggleCompare}
                            />
                        )}
                        
                        {activeTab === 'speedtest' && (
                            <SpeedTestView vpns={vpnDataComplete} />
                        )}
                    </main>
                    
                    {showQuiz && (
                        <QuizModal 
                            questions={quizQuestions}
                            vpns={vpnDataComplete}
                            onClose={() => setShowQuiz(false)}
                            onComplete={setQuizResults}
                        />
                    )}
                    
                    {quizResults && (
                        <QuizResultsModal 
                            results={quizResults}
                            onClose={() => setQuizResults(null)}
                        />
                    )}
                </div>
            );
        }
        
        // Header Component
        function Header({ theme, setTheme }) {
            return (
                <header style={{
                    position: 'sticky',
                    top: 0,
                    zIndex: 50,
                    background: 'var(--color-bg)',
                    borderBottom: '1px solid var(--color-border)',
                    backdropFilter: 'blur(10px)'
                }}>
                    <div style={{
                        maxWidth: '1400px',
                        margin: '0 auto',
                        padding: '16px 24px',
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center'
                    }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                            <div style={{
                                width: '40px',
                                height: '40px',
                                background: 'linear-gradient(135deg, var(--color-primary), var(--color-accent))',
                                borderRadius: '8px',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontWeight: 'bold',
                                color: 'white',
                                fontSize: '20px'
                            }}>
                                V
                            </div>
                            <div>
                                <h1 className="font-display" style={{ fontSize: '1.25rem', fontWeight: '700' }}>
                                    VPN Compass Pro
                                </h1>
                                <p className="font-mono" style={{ fontSize: '0.75rem', color: 'var(--color-text-muted)' }}>
                                    Phase 2 ‚Ä¢ Enhanced Edition
                                </p>
                            </div>
                        </div>
                        
                        <button 
                            onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}
                            className="btn btn-secondary"
                            style={{ padding: '8px 12px' }}>
                            {theme === 'dark' ? '‚òÄÔ∏è' : 'üåô'}
                        </button>
                    </div>
                </header>
            );
        }
        
        // Comparison View with Advanced Filters
        function ComparisonView({ vpns, favorites, toggleFavorite, compareList, toggleCompare }) {
            const [filters, setFilters] = useState({
                search: '',
                minScore: 0,
                maxPrice: 20,
                streaming: 'all',
                verified: 'all',
                protocols: [],
                features: []
            });
            
            const [sortBy, setSortBy] = useState('rank');
            const [sortOrder, setSortOrder] = useState('asc');
            
            const filteredVPNs = useMemo(() => {
                let result = vpns.filter(vpn => {
                    if (filters.search && !vpn.name.toLowerCase().includes(filters.search.toLowerCase())) {
                        return false;
                    }
                    if (vpn.overallScore < filters.minScore) return false;
                    
                    const monthlyPrice = parseFloat(vpn.price.monthly.replace(/[‚Ç¨$]/g, ''));
                    if (monthlyPrice > filters.maxPrice) return false;
                    
                    if (filters.streaming !== 'all' && vpn.streaming !== filters.streaming) return false;
                    if (filters.verified === 'verified' && vpn.noLogs !== 'Verified') return false;
                    
                    if (filters.protocols.length > 0) {
                        const hasProtocol = filters.protocols.some(p => vpn.protocols.includes(p));
                        if (!hasProtocol) return false;
                    }
                    
                    if (filters.features.length > 0) {
                        const hasFeatures = filters.features.every(f => vpn.features[f]);
                        if (!hasFeatures) return false;
                    }
                    
                    return true;
                });
                
                result.sort((a, b) => {
                    let aVal = a[sortBy];
                    let bVal = b[sortBy];
                    
                    if (sortBy === 'speeds') {
                        aVal = a.speeds.download;
                        bVal = b.speeds.download;
                    }
                    
                    if (typeof aVal === 'string') {
                        return sortOrder === 'asc' 
                            ? aVal.localeCompare(bVal)
                            : bVal.localeCompare(aVal);
                    }
                    
                    return sortOrder === 'asc' ? aVal - bVal : bVal - aVal;
                });
                
                return result;
            }, [vpns, filters, sortBy, sortOrder]);
            
            return (
                <div>
                    <div className="card" style={{ marginBottom: '24px' }}>
                        <h3 style={{ marginBottom: '20px', fontSize: '1.125rem', fontWeight: '600' }}>
                            Advanced Filters
                        </h3>
                        
                        <div className="grid-4" style={{ marginBottom: '20px' }}>
                            <div>
                                <label style={{ display: 'block', marginBottom: '8px', fontSize: '0.875rem', fontWeight: '600' }}>
                                    Search VPN
                                </label>
                                <input
                                    type="text"
                                    placeholder="Search by name..."
                                    value={filters.search}
                                    onChange={(e) => setFilters({...filters, search: e.target.value})}
                                />
                            </div>
                            
                            <div>
                                <label style={{ display: 'block', marginBottom: '8px', fontSize: '0.875rem', fontWeight: '600' }}>
                                    Streaming Quality
                                </label>
                                <select
                                    value={filters.streaming}
                                    onChange={(e) => setFilters({...filters, streaming: e.target.value})}>
                                    <option value="all">All</option>
                                    <option value="Excellent">Excellent</option>
                                    <option value="Good">Good</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style={{ display: 'block', marginBottom: '8px', fontSize: '0.875rem', fontWeight: '600' }}>
                                    Verification Status
                                </label>
                                <select
                                    value={filters.verified}
                                    onChange={(e) => setFilters({...filters, verified: e.target.value})}>
                                    <option value="all">All</option>
                                    <option value="verified">Verified Only</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style={{ display: 'block', marginBottom: '8px', fontSize: '0.875rem', fontWeight: '600' }}>
                                    Sort By
                                </label>
                                <select
                                    value={sortBy}
                                    onChange={(e) => setSortBy(e.target.value)}>
                                    <option value="rank">Rank</option>
                                    <option value="overallScore">Score</option>
                                    <option value="name">Name</option>
                                    <option value="speeds">Speed</option>
                                </select>
                            </div>
                        </div>
                        
                        <div className="slider-container">
                            <label style={{ display: 'block', marginBottom: '12px', fontSize: '0.875rem', fontWeight: '600' }}>
                                Minimum Score: {filters.minScore}
                            </label>
                            <input
                                type="range"
                                className="slider"
                                min="0"
                                max="100"
                                step="5"
                                value={filters.minScore}
                                onChange={(e) => setFilters({...filters, minScore: parseInt(e.target.value)})}
                            />
                        </div>
                        
                        <div className="slider-container">
                            <label style={{ display: 'block', marginBottom: '12px', fontSize: '0.875rem', fontWeight: '600' }}>
                                Max Monthly Price: ${filters.maxPrice}
                            </label>
                            <input
                                type="range"
                                className="slider"
                                min="0"
                                max="20"
                                step="1"
                                value={filters.maxPrice}
                                onChange={(e) => setFilters({...filters, maxPrice: parseInt(e.target.value)})}
                            />
                        </div>
                        
                        <div style={{ marginTop: '16px', padding: '12px', background: 'var(--color-bg-tertiary)', borderRadius: '8px' }}>
                            Showing <strong>{filteredVPNs.length}</strong> of {vpns.length} VPN providers
                        </div>
                    </div>
                    
                    <div style={{
                        display: 'grid',
                        gridTemplateColumns: 'repeat(auto-fill, minmax(380px, 1fr))',
                        gap: '24px'
                    }}>
                        {filteredVPNs.map((vpn) => (
                            <VPNCardEnhanced 
                                key={vpn.name}
                                vpn={vpn}
                                isFavorite={favorites.includes(vpn.name)}
                                toggleFavorite={toggleFavorite}
                                isComparing={compareList.includes(vpn.name)}
                                toggleCompare={toggleCompare}
                            />
                        ))}
                    </div>
                </div>
            );
        }
        
        // Enhanced VPN Card
        function VPNCardEnhanced({ vpn, isFavorite, toggleFavorite, isComparing, toggleCompare }) {
            const [expanded, setExpanded] = useState(false);
            
            const getScoreClass = (score) => {
                if (score >= 90) return 'score-5';
                if (score >= 80) return 'score-4';
                if (score >= 70) return 'score-3';
                if (score >= 60) return 'score-2';
                return 'score-1';
            };
            
            return (
                <div className="card">
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px' }}>
                        <div style={{ flex: 1 }}>
                            <h3 className="font-display" style={{ fontSize: '1.5rem', fontWeight: '700', marginBottom: '8px' }}>
                                {vpn.name}
                            </h3>
                            <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>
                                <span className={`score-badge ${getScoreClass(vpn.overallScore)}`}>
                                    {vpn.overallScore}/100
                                </span>
                                <span className="badge">#{vpn.rank}</span>
                            </div>
                        </div>
                        
                        <div style={{ display: 'flex', gap: '8px' }}>
                            <button
                                className={`favorite-btn ${isFavorite ? 'active' : ''}`}
                                onClick={() => toggleFavorite(vpn.name)}
                                title={isFavorite ? 'Remove from favorites' : 'Add to favorites'}>
                                <HeartIcon filled={isFavorite} />
                            </button>
                            <button
                                className="btn btn-sm btn-secondary"
                                onClick={() => toggleCompare(vpn.name)}>
                                {isComparing ? '‚úì Added' : '+ Compare'}
                            </button>
                        </div>
                    </div>
                    
                    {vpn.special && (
                        <div style={{
                            background: 'linear-gradient(135deg, var(--color-success), #059669)',
                            color: 'white',
                            padding: '8px 12px',
                            borderRadius: '8px',
                            fontSize: '0.875rem',
                            fontWeight: '600',
                            marginBottom: '16px'
                        }}>
                            üéâ {vpn.special}
                        </div>
                    )}
                    
                    <div style={{
                        display: 'grid',
                        gridTemplateColumns: '1fr 1fr 1fr',
                        gap: '12px',
                        marginBottom: '16px',
                        padding: '16px',
                        background: 'var(--color-bg-tertiary)',
                        borderRadius: '8px'
                    }}>
                        <div>
                            <div style={{ fontSize: '0.75rem', color: 'var(--color-text-muted)', marginBottom: '4px' }}>
                                Monthly
                            </div>
                            <div className="font-mono" style={{ fontWeight: '700' }}>
                                {vpn.price.monthly}
                            </div>
                        </div>
                        <div>
                            <div style={{ fontSize: '0.75rem', color: 'var(--color-text-muted)', marginBottom: '4px' }}>
                                Annual
                            </div>
                            <div className="font-mono" style={{ fontWeight: '700', color: 'var(--color-success)' }}>
                                {vpn.price.annual}
                            </div>
                        </div>
                        <div>
                            <div style={{ fontSize: '0.75rem', color: 'var(--color-text-muted)', marginBottom: '4px' }}>
                                2-Year
                            </div>
                            <div className="font-mono" style={{ fontWeight: '700', color: 'var(--color-primary)' }}>
                                {vpn.price.twoYear}
                            </div>
                        </div>
                    </div>
                    
                    <div style={{ display: 'grid', gap: '8px', fontSize: '0.875rem', marginBottom: '16px' }}>
                        <div>‚ö° {vpn.speeds.download} Mbps ({vpn.speeds.loss}% loss)</div>
                        <div>üìç {vpn.countries} countries ‚Ä¢ {vpn.servers} servers</div>
                        <div>üì± {vpn.devices} devices</div>
                        <div>{vpn.noLogs === 'Verified' ? '‚úÖ' : '‚ö†Ô∏è'} {vpn.noLogs} no-logs</div>
                    </div>
                    
                    {expanded && (
                        <div style={{
                            padding: '16px',
                            background: 'var(--color-bg-tertiary)',
                            borderRadius: '8px',
                            marginBottom: '16px',
                            fontSize: '0.875rem'
                        }}>
                            <div style={{ display: 'grid', gap: '12px' }}>
                                <div><strong>Best For:</strong> {vpn.bestFor}</div>
                                <div><strong>Streaming:</strong> {vpn.streaming}</div>
                                <div><strong>Jurisdiction:</strong> {vpn.jurisdiction}</div>
                                <div><strong>Encryption:</strong> {vpn.privacy.encryption}</div>
                                <div><strong>Protocols:</strong> {vpn.protocols.join(', ')}</div>
                                <div><strong>Audit:</strong> {vpn.privacy.audit} by {vpn.privacy.auditor}</div>
                                <div><strong>Support:</strong> {vpn.support.rating}/10</div>
                                <div>
                                    <strong>Features:</strong>
                                    <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', marginTop: '8px' }}>
                                        {vpn.features.killSwitch && <span className="badge badge-success">Kill Switch</span>}
                                        {vpn.features.splitTunnel && <span className="badge badge-success">Split Tunnel</span>}
                                        {vpn.features.adBlock && <span className="badge badge-success">Ad Blocker</span>}
                                        {vpn.features.doubleVPN && <span className="badge badge-success">Double VPN</span>}
                                        {vpn.features.portForward && <span className="badge badge-success">Port Forward</span>}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    <button
                        onClick={() => setExpanded(!expanded)}
                        className="btn btn-primary"
                        style={{ width: '100%', justifyContent: 'center' }}>
                        {expanded ? 'Show Less ‚ñ≤' : 'Show More ‚ñº'}
                    </button>
                </div>
            );
        }
        
        // Favorites View
        function FavoritesView({ vpns, toggleFavorite, compareList, toggleCompare }) {
            if (vpns.length === 0) {
                return (
                    <div className="card" style={{ textAlign: 'center', padding: '60px 24px' }}>
                        <HeartIcon filled={false} />
                        <h3 style={{ marginTop: '16px', marginBottom: '8px' }}>No favorites yet</h3>
                        <p style={{ color: 'var(--color-text-muted)' }}>
                            Click the heart icon on any VPN to add it to your favorites
                        </p>
                    </div>
                );
            }
            
            return (
                <div style={{
                    display: 'grid',
                    gridTemplateColumns: 'repeat(auto-fill, minmax(380px, 1fr))',
                    gap: '24px'
                }}>
                    {vpns.map((vpn) => (
                        <VPNCardEnhanced 
                            key={vpn.name}
                            vpn={vpn}
                            isFavorite={true}
                            toggleFavorite={toggleFavorite}
                            isComparing={compareList.includes(vpn.name)}
                            toggleCompare={toggleCompare}
                        />
                    ))}
                </div>
            );
        }
        
        // Compare View
        function CompareView({ vpns, compareList, toggleCompare }) {
            if (vpns.length === 0) {
                return (
                    <div className="card" style={{ textAlign: 'center', padding: '60px 24px' }}>
                        <CompareIcon />
                        <h3 style={{ marginTop: '16px', marginBottom: '8px' }}>No VPNs selected for comparison</h3>
                        <p style={{ color: 'var(--color-text-muted)' }}>
                            Select up to 4 VPNs to compare them side-by-side
                        </p>
                    </div>
                );
            }
            
            return (
                <div className="card">
                    <h2 style={{ marginBottom: '24px' }}>Side-by-Side Comparison</h2>
                    
                    <div className="comparison-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    {vpns.map(vpn => (
                                        <th key={vpn.name}>
                                            <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                                <span>{vpn.name}</span>
                                                <button
                                                    className="btn btn-sm btn-secondary"
                                                    onClick={() => toggleCompare(vpn.name)}>
                                                    Remove
                                                </button>
                                            </div>
                                        </th>
                                    ))}
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Overall Score</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>
                                            <span className={`score-badge ${vpn.overallScore >= 90 ? 'score-5' : vpn.overallScore >= 80 ? 'score-4' : 'score-3'}`}>
                                                {vpn.overallScore}/100
                                            </span>
                                        </td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Monthly Price</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name} className="font-mono">{vpn.price.monthly}</td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Annual Price</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name} className="font-mono" style={{ color: 'var(--color-success)', fontWeight: '600' }}>
                                            {vpn.price.annual}
                                        </td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Speed</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>{vpn.speeds.download} Mbps</td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Servers</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>{vpn.servers}</td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Countries</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>{vpn.countries}</td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Devices</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>{vpn.devices}</td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>No-Logs</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>
                                            {vpn.noLogs === 'Verified' ? '‚úÖ Verified' : '‚ö†Ô∏è Claimed'}
                                        </td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Streaming</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>
                                            <span className={`badge ${vpn.streaming === 'Excellent' ? 'badge-success' : 'badge-warning'}`}>
                                                {vpn.streaming}
                                            </span>
                                        </td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Kill Switch</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>{vpn.features.killSwitch ? '‚úÖ' : '‚ùå'}</td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Split Tunneling</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>{vpn.features.splitTunnel ? '‚úÖ' : '‚ùå'}</td>
                                    ))}
                                </tr>
                                <tr>
                                    <td><strong>Port Forwarding</strong></td>
                                    {vpns.map(vpn => (
                                        <td key={vpn.name}>{vpn.features.portForward ? '‚úÖ' : '‚ùå'}</td>
                                    ))}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        }
        
        // Speed Test View with Chart
        function SpeedTestView({ vpns }) {
            const canvasRef = useRef(null);
            
            useEffect(() => {
                if (canvasRef.current && window.Chart) {
                    const ctx = canvasRef.current.getContext('2d');
                    
                    const chart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: vpns.map(v => v.name),
                            datasets: [
                                {
                                    label: 'Download Speed (Mbps)',
                                    data: vpns.map(v => v.speeds.download),
                                    backgroundColor: 'rgba(79, 70, 229, 0.7)',
                                    borderColor: 'rgba(79, 70, 229, 1)',
                                    borderWidth: 2
                                },
                                {
                                    label: 'Speed Loss (%)',
                                    data: vpns.map(v => v.speeds.loss),
                                    backgroundColor: 'rgba(244, 63, 94, 0.7)',
                                    borderColor: 'rgba(244, 63, 94, 1)',
                                    borderWidth: 2,
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'Speed (Mbps)'
                                    }
                                },
                                y1: {
                                    type: 'linear',
                                    display: true,
                                    position: 'right',
                                    title: {
                                        display: true,
                                        text: 'Loss (%)'
                                    },
                                    grid: {
                                        drawOnChartArea: false
                                    }
                                }
                            }
                        }
                    });
                    
                    return () => chart.destroy();
                }
            }, [vpns]);
            
            return (
                <div>
                    <div className="card" style={{ marginBottom: '24px' }}>
                        <h2 style={{ marginBottom: '16px' }}>Speed Test Analysis</h2>
                        <p style={{ color: 'var(--color-text-muted)', marginBottom: '24px' }}>
                            Comparison of download speeds and speed loss percentages across all tested VPNs
                        </p>
                        
                        <div className="chart-container">
                            <canvas ref={canvasRef}></canvas>
                        </div>
                    </div>
                    
                    <div className="card">
                        <h3 style={{ marginBottom: '16px' }}>Detailed Speed Metrics</h3>
                        <div className="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>VPN</th>
                                        <th>Download</th>
                                        <th>Upload</th>
                                        <th>Loss %</th>
                                        <th>Latency</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {vpns.map(vpn => (
                                        <tr key={vpn.name}>
                                            <td><strong>{vpn.name}</strong></td>
                                            <td className="font-mono">{vpn.speeds.download} Mbps</td>
                                            <td className="font-mono">{vpn.speeds.upload} Mbps</td>
                                            <td>
                                                <span className={`badge ${vpn.speeds.loss < 15 ? 'badge-success' : vpn.speeds.loss < 25 ? 'badge-warning' : 'badge-danger'}`}>
                                                    {vpn.speeds.loss}%
                                                </span>
                                            </td>
                                            <td className="font-mono">{vpn.speeds.latency}ms</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        }
        
        // Quiz Modal
        function QuizModal({ questions, vpns, onClose, onComplete }) {
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState([]);
            
            const handleAnswer = (option) => {
                const newAnswers = [...answers, option.weights];
                setAnswers(newAnswers);
                
                if (currentQuestion < questions.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                } else {
                    // Calculate results
                    const aggregatedWeights = newAnswers.reduce((acc, weights) => {
                        Object.keys(weights).forEach(key => {
                            acc[key] = (acc[key] || 0) + weights[key];
                        });
                        return acc;
                    }, {});
                    
                    // Score VPNs based on weights
                    const scoredVPNs = vpns.map(vpn => {
                        let score = vpn.overallScore;
                        
                        if (aggregatedWeights.privacy) {
                            score += vpn.privacy.verified ? aggregatedWeights.privacy * 2 : 0;
                        }
                        if (aggregatedWeights.streaming) {
                            score += vpn.streaming === 'Excellent' ? aggregatedWeights.streaming * 2 : 0;
                        }
                        if (aggregatedWeights.speed) {
                            score += vpn.speeds.download > 400 ? aggregatedWeights.speed * 2 : 0;
                        }
                        if (aggregatedWeights.devices && vpn.devices === 'Unlimited') {
                            score += aggregatedWeights.devices * 3;
                        }
                        
                        return { ...vpn, quizScore: score };
                    });
                    
                    scoredVPNs.sort((a, b) => b.quizScore - a.quizScore);
                    
                    onComplete({
                        topPicks: scoredVPNs.slice(0, 3),
                        weights: aggregatedWeights
                    });
                    onClose();
                }
            };
            
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal" onClick={(e) => e.stopPropagation()}>
                        <div style={{ marginBottom: '24px' }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                                <h2 className="font-display">Find Your Perfect VPN</h2>
                                <button onClick={onClose} className="btn btn-secondary btn-sm">‚úï</button>
                            </div>
                            
                            <div className="progress-bar">
                                <div className="progress-fill" style={{ width: `${progress}%` }}></div>
                            </div>
                            
                            <div style={{ marginTop: '12px', fontSize: '0.875rem', color: 'var(--color-text-muted)' }}>
                                Question {currentQuestion + 1} of {questions.length}
                            </div>
                        </div>
                        
                        <h3 style={{ fontSize: '1.25rem', marginBottom: '24px' }}>
                            {question.question}
                        </h3>
                        
                        <div style={{ display: 'grid', gap: '12px' }}>
                            {question.options.map((option, i) => (
                                <button
                                    key={i}
                                    className="btn btn-secondary"
                                    style={{
                                        justifyContent: 'flex-start',
                                        padding: '16px',
                                        fontSize: '1rem',
                                        textAlign: 'left'
                                    }}
                                    onClick={() => handleAnswer(option)}>
                                    {option.text}
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }
        
        // Quiz Results Modal
        function QuizResultsModal({ results, onClose }) {
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal" onClick={(e) => e.stopPropagation()}>
                        <div style={{ marginBottom: '24px' }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                <h2 className="font-display">Your Top VPN Recommendations</h2>
                                <button onClick={onClose} className="btn btn-secondary btn-sm">‚úï</button>
                            </div>
                        </div>
                        
                        <p style={{ color: 'var(--color-text-muted)', marginBottom: '24px' }}>
                            Based on your preferences, here are the best VPNs for you:
                        </p>
                        
                        <div style={{ display: 'grid', gap: '16px' }}>
                            {results.topPicks.map((vpn, i) => (
                                <div key={vpn.name} className="card card-compact">
                                    <div style={{ display: 'flex', gap: '16px', alignItems: 'center' }}>
                                        <div style={{
                                            width: '48px',
                                            height: '48px',
                                            background: i === 0 ? 'linear-gradient(135deg, #FFD700, #FFA500)' : 
                                                       i === 1 ? 'linear-gradient(135deg, #C0C0C0, #A0A0A0)' :
                                                       'linear-gradient(135deg, #CD7F32, #8B4513)',
                                            borderRadius: '50%',
                                            display: 'flex',
                                            alignItems: 'center',
                                            justifyContent: 'center',
                                            color: 'white',
                                            fontWeight: 'bold',
                                            fontSize: '1.5rem',
                                            flexShrink: 0
                                        }}>
                                            {i + 1}
                                        </div>
                                        
                                        <div style={{ flex: 1 }}>
                                            <h3 className="font-display" style={{ fontSize: '1.25rem', marginBottom: '4px' }}>
                                                {vpn.name}
                                            </h3>
                                            <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', marginBottom: '8px' }}>
                                                <span className={`score-badge score-5`}>
                                                    Match: {Math.round((vpn.quizScore / 150) * 100)}%
                                                </span>
                                                <span className="badge">{vpn.bestFor}</span>
                                            </div>
                                            <div style={{ fontSize: '0.875rem', color: 'var(--color-text-muted)' }}>
                                                {vpn.price.annual}/mo annual ‚Ä¢ {vpn.countries} countries
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        <button className="btn btn-primary" style={{ width: '100%', marginTop: '24px' }} onClick={onClose}>
                            View Full Comparison
                        </button>
                    </div>
                </div>
            );
        }
        
        // Render App
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<VPNComparisonApp />);
    </script>
</body>
</html>
